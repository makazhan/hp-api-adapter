<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Harry Potter Explorer</title>
  <style>
    @font-face {
      font-family: 'Black Chancery';
      src: url('fonts/BlackChancery.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    body {
      background-color: #2b2b2b; /* dark grey */
      color: #dcdcdc;            /* light grey */
      font-family: 'Black Chancery', serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }

    .card {
      background-color: #3a3a3a;
      border: 1px solid #555;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.6);
      max-width: 900px;  /* enlarged card for bigger image */
      text-align: center;
      overflow: hidden;
    }

    .card img {
      width: 100%;
      height: auto;
      display: block;
    }

    .card-body {
      padding: 25px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    a {
      color: #e0e0e0;
      text-decoration: none;
      font-size: 1.4rem;
      margin: 0 1px;
    }

    a:hover {
      text-decoration: underline;
    }

    .house {
      margin-bottom: 40px;
    }

    .house img {
      width: 200px;
      height: auto;
      margin-bottom: 15px;
    }

    .house h2 {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .house p {
      margin: 5px 0;
    }

    .back-link {
      margin-top: 40px;
      margin-bottom: 40px;
      font-size: 1.2rem;
      display: block;
    }

  </style>
</head>
<body>
  <div class="card">
    <div class="card-body">
      <h1>Hogwarts Houses</h1>
    </div>

    <div style="position: relative; display: inline-block; width: 100%;">
      <img src="images/geroge-herriots.jpg" title="George Heriot's School, Edinburgh - Possible inspiration for Hogwarts" alt="George Heriot's School, Edinburgh - Possible inspiration for Hogwarts" style="width: 100%; height: auto; display: block;">
      <div style="
        position: absolute;
        bottom: 8px;
        right: 12px;
        font-size: 0.7rem;
        font-family: Arial, sans-serif;
        color: black;
        background: rgba(255,255,255,0.6);
        padding: 2px 6px;
        border-radius: 4px;
      ">
        source: <a href="https://everythingedinburgh.com/harry-potter-sites-in-edinburgh/" style="color:black; font-size: 0.7rem;">everythingedinburgh.com</a>
      </div>
    </div>

    <div id="houses-container"></div>

    <div class="back-link">
      <a href="index.html">back to Potterrow</a>
    </div>
  
  </div>

  <script>
    async function loadHouses() {
      try {
        const res = await fetch('/api/houses');
        const houses = await res.json();
        const container = document.getElementById('houses-container');

        houses.forEach(h => {
          // image file assumed to be named "<HouseName>.webp"
          const imgFile = `images/${h.name}.webp`;
          const wikiLink = `https://en.wikipedia.org/wiki/Hogwarts#${h.name}`;

          const div = document.createElement('div');
          div.className = 'house';
          div.innerHTML = `
            <div style="display: flex; align-items: center; gap: 20px; text-align: left; margin: 20px 0;">
              <div style="flex: 1; margin: 10px 0;">
                <h2 style="margin-left: 20px;">${h.name}</h2>
                <p style="margin-left: 40px;"><strong>Colors:</strong> ${h.colors}</p>
                <p style="margin-left: 40px;"><strong>Symbol:</strong> ${h.symbol}</p>
                <p style="margin-left: 40px;">${h.description} <a href="${wikiLink}" target="_blank" style="font-size: 1rem;">[ source ]</a></p>
              </div>
              <img src="${imgFile}" alt="${h.name} Crest" style="width: 180px; height: auto; flex-shrink: 0; margin: 10px;">
            </div>
          `;
          container.appendChild(div);
        });
      } catch (err) {
        console.error('Failed to load houses', err);
      }
    }

    loadHouses();
  </script>

</body>
</html>
