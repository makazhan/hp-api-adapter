# Harry Potter API Adapter

Harry Potter API Adapter — это учебный проект, представляющий собой простое веб-приложение для фанатов Гарри Поттера. Приложение состоит из главной страницы (лендинг) и страницы со списками факультетов и персонажей, где доступны поиск и фильтрация. Также доступна страница для каждего персонажа и чат с ним (chatGPT-o4-mini). Технически реализован как врапер (адаптер) на сторонний бесплатный API <https://hp-api.onrender.com/>.

---

## Web версия

Доступна по адресу: <https://hp-api-adapter.onrender.com/>

Возможна медленная прогрузка сайта из-за минимального тарифного плана.

Прошу терпения :)

## Установка и запуск

1. Склонируйте репозиторий:

   ```bash
   git clone https://github.com/makazhan/hp-api-adapter.git
   cd emoji_hub
   ```

2. Соберите и запустите проект в Docker:

   ```bash
   docker build -t hp-api-adapter .

   docker run -d --name hp-api-adapter --env-file .env -p 8000:8000 hp-api-adapter
   ```

   .env содержит ключ к chat-gpt API и не публикуется здесь, сорян :)

3. Приложение будет доступно по адресу:

   ```bash
   http://localhost:8000
   ```

4. Эндпойнты:

- Главная страница: /
- Страница со списком факултетов: /houses.html
- Страница со списком персонажей: /characters.html

## Дизайн и процесс разработки

Главная страница выполнена в минималистичном стиле и служит точкой входа в приложение.  
Основные разделы:

- **Список факультетов**: карточки с изображениями гербов факультетов, цветами, символикой и кратким описанием. Для каждого факультета добавлены ссылки на дополнительные материалы.
- **Список персонажей**: сетка карточек с фото, именем, факультетом и патронусом. Поддерживаются поиск по имени и фильтрация по факультету. Реализована подгрузка по страницам (lazy loading).
- **Карточка персонажа**: отдельная страница с подробной информацией (имена, дата рождения, происхождение, палочка, патронус, актёр и т.д.). Фото выводится рядом с текстом.
- **Чат с персонажем**: под карточкой расположен чат-виджет. Пользователь может писать сообщения, а ответы генерируются моделью `gpt-4o-mini` (через OpenAI API). Персонаж старается отвечать в образе.

Верстка основана на статических HTML/CSS в тёмной цветовой гамме с декоративным шрифтом *Black Chancery* для заголовков и стандартным шрифтом с засечками (serif) для удобного чтения чата.  

## Уникальные подходы

- Вместо использования React и других фреймворков выбран минималистичный стек: FastAPI для бэкенда и статические HTML/JS для фронтенда.
- Весь трафик к внешнему API (`hp-api.onrender.com`) проходит через адаптер на FastAPI, чтобы изолировать клиент от прямых вызовов.
- Добавлен чат с персонажем на базе LLM (OpenAI GPT-4o-mini), что делает взаимодействие более живым и интерактивным.

## Компромиссы и trade-offs

- Отказ от React сделал проект проще и быстрее для развертывания, но ограничил гибкость интерфейса.
- Синхронный `requests` в бэкенде проще для реализации, но в продакшене при большой нагрузке может быть узким местом.
- Подгрузка данных о персонажах с постраничной навигацией реализована на клиенте; это упрощает сервер, но накладывает ограничения на масштабируемость.
- Чат с персонажем использует внешнее API, поэтому скорость и стоимость зависят от тарифов OpenAI.

## Известные проблемы

Не реализована функция добавления персонажа в "избранное".

## Выбор технологий

- **Python + FastAPI** — для серверного кода и API-адаптера.
- **Docker** — для упаковки всего приложения в единый контейнер и простого запуска.
- **Vanilla JS** — минималистичное решение для фронтенд-логики.
- **Bootstrap 5** — базовая сетка и стили для адаптивности.
- **OpenAI GPT-4o-mini** — как движок для чата с персонажами.

Этот стек выбран, чтобы сфокусироваться на функциональности и простоте: получить рабочее приложение с минимумом зависимостей и при этом добавить «магическую» возможность живого общения с персонажами.
